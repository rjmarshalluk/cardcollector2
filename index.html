<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Card Collector V3 Ultimate (Fixed Packs)</title>

<style>
:root{
  --bg:#060814;
  --panel:#12163d;
  --panel2:#1c2270;
  --neon:#00eaff;
  --pink:#ff4dff;
  --text:#f3f6ff;
  --muted:rgba(243,246,255,.75);
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:system-ui,Segoe UI,sans-serif;
  background:
    radial-gradient(circle at top,#1b2170,transparent 50%),
    radial-gradient(circle at 20% 30%, rgba(255,77,255,.15), transparent 40%),
    radial-gradient(circle at 80% 20%, rgba(0,234,255,.15), transparent 40%),
    linear-gradient(#04050e,#070b22);
  color:var(--text);
}

/* ===== HEADER ===== */
#top{
  position:sticky;
  top:0;
  z-index:10;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:18px 22px;
  background:linear-gradient(180deg,#0a0f36,#060821);
  border-bottom:1px solid rgba(255,255,255,.08);
  box-shadow:0 0 60px rgba(0,234,255,.22);
}

#hud{
  display:flex;
  gap:12px;
  align-items:center;
  flex-wrap:wrap;
}

.statBox{
  background:linear-gradient(180deg,#12184d,#0c1035);
  padding:10px 14px;
  border-radius:14px;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.08),
    0 0 22px rgba(0,234,255,.18);
  font-weight:800;
  letter-spacing:.2px;
  font-size:14px;
}

button{
  background:linear-gradient(135deg,var(--neon),var(--pink));
  border:none;
  padding:12px 18px;
  border-radius:14px;
  font-weight:950;
  cursor:pointer;
  color:#050513;
  box-shadow:0 0 26px rgba(0,234,255,.55);
  transition:.16s;
}
button:hover{transform:translateY(-2px) scale(1.04); box-shadow:0 0 44px rgba(255,77,255,.65);}
button:active{transform:scale(.96)}

.btnRow{
  display:flex;
  gap:10px;
  align-items:center;
}

/* ===== SECTIONS ===== */
.section{
  margin:34px 22px;
  max-width:1200px;
}
@media (min-width: 1100px){
  .section{margin:40px auto;}
}

.sectionTitle{
  display:flex;
  align-items:flex-end;
  justify-content:space-between;
  gap:16px;
  margin-bottom:14px;
}
.sectionTitle h2{
  margin:0;
  font-size:28px;
  letter-spacing:.6px;
  text-shadow:0 0 16px rgba(0,234,255,.35);
}
.sectionTitle .sub{
  color:var(--muted);
  font-weight:700;
  font-size:13px;
}

/* ===== PACK SHOP ===== */
.shop{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(210px,1fr));
  gap:16px;
}

.pack{
  background:linear-gradient(180deg,var(--panel2),var(--panel));
  padding:16px;
  border-radius:18px;
  text-align:left;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.08),
    0 14px 40px rgba(0,0,0,.55);
  transition:.18s;
  position:relative;
  overflow:hidden;
}
.pack:before{
  content:"";
  position:absolute; inset:-2px;
  background:radial-gradient(circle at top left, rgba(0,234,255,.22), transparent 45%),
             radial-gradient(circle at bottom right, rgba(255,77,255,.22), transparent 45%);
  pointer-events:none;
}
.pack:hover{
  transform:translateY(-6px);
  box-shadow:0 0 46px rgba(0,234,255,.25);
}
.pack h3{
  margin:0 0 6px;
  font-size:18px;
  letter-spacing:.3px;
}
.pack .meta{
  display:flex;
  justify-content:space-between;
  align-items:center;
  color:var(--muted);
  font-weight:800;
  margin-bottom:10px;
}
.pack .meta span:last-child{
  color:var(--text);
  opacity:.95;
}
.pack button{width:100%; margin-top:4px}

/* ===== INVENTORY ===== */
.inventory{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(230px,1fr));
  gap:18px;
}

.card{
  background:linear-gradient(180deg,#1b2080,#0c103b);
  border-radius:22px;
  padding:12px;
  text-align:center;
  position:relative;
  box-shadow:
    inset 0 0 0 1px rgba(255,255,255,.08),
    0 16px 45px rgba(0,0,0,.55);
  transition:.18s;
}
.card:hover{transform:scale(1.05)}
.card .art{
  font-size:78px;
  height:230px;
  display:flex;
  align-items:center;
  justify-content:center;
}
.card strong{display:block; font-size:18px; margin-top:2px}
.card .count{color:var(--muted); font-weight:800; margin-top:2px}

.badge{
  position:absolute;
  top:12px;
  right:12px;
  padding:6px 12px;
  border-radius:999px;
  font-size:11px;
  font-weight:950;
  letter-spacing:.3px;
  background:rgba(255,255,255,.12);
  box-shadow:inset 0 0 0 1px rgba(255,255,255,.10);
}

/* RARITY GLOWS */
.Common{box-shadow:0 0 12px rgba(220,220,220,.55)}
.Rare{box-shadow:0 0 18px rgba(0,234,255,.65)}
.Epic{box-shadow:0 0 26px rgba(199,125,255,.7)}
.Legendary{box-shadow:0 0 34px rgba(255,165,0,.75)}
.Mythic{box-shadow:0 0 48px rgba(255,0,0,.78)}

/* ===== PACK OPEN OVERLAY ===== */
#overlay, #dailyArea{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.92);
  display:none;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  z-index:30;
  padding:18px;
}

#overlay h2{
  margin:0 0 12px;
  text-shadow:0 0 20px rgba(0,234,255,.45);
  letter-spacing:1px;
}

#reveal{
  display:flex;
  gap:16px;
  flex-wrap:wrap;
  justify-content:center;
  margin:10px 0 16px;
}

.reveal-card{
  width:150px;
  background:linear-gradient(180deg,var(--panel2),#0e123b);
  padding:12px;
  border-radius:18px;
  text-align:center;
  box-shadow:0 0 26px rgba(0,234,255,.18);
  animation:pop .28s ease;
}
.reveal-card .art{
  height:120px;
  font-size:46px;
  display:flex;
  justify-content:center;
  align-items:center;
}
@keyframes pop{
  from{transform:scale(.55);opacity:0}
  to{transform:scale(1);opacity:1}
}

/* ===== CRAZY FLASH (Legendary+) ===== */
#rareFlash{
  position:fixed;
  inset:0;
  display:none;
  justify-content:center;
  align-items:center;
  z-index:200;
  font-size:64px;
  font-weight:1000;
  letter-spacing:4px;
  pointer-events:none;
}
.legendFlash{
  background:radial-gradient(circle, rgba(255,170,0,.92), rgba(0,0,0,.96));
  color:white;
  text-shadow:0 0 40px orange;
}
.mythicFlash{
  background:radial-gradient(circle, rgba(255,0,0,.95), rgba(0,0,0,.98));
  color:white;
  text-shadow:0 0 60px red;
}
@keyframes flash{
  from{opacity:0; transform:scale(.6)}
  40%{opacity:1; transform:scale(1.15)}
  to{opacity:0; transform:scale(1)}
}
.flashAnim{ animation:flash .7s ease; }

@keyframes shake{
  0%,100%{transform:translate(0)}
  25%{transform:translate(-8px)}
  50%{transform:translate(8px)}
  75%{transform:translate(-6px)}
}
.shake{animation:shake .4s}

/* ===== DAILY AREA ===== */
.dailyBox{
  width:min(380px, 92vw);
  background:linear-gradient(180deg,var(--panel2),#070a22);
  border-radius:22px;
  padding:22px;
  box-shadow:0 0 60px rgba(0,234,255,.25);
  text-align:center;
}
.dailyBox h2{margin:0 0 10px}
.timer{
  font-size:30px;
  font-weight:950;
  letter-spacing:1px;
  margin:10px 0 12px;
  text-shadow:0 0 16px rgba(255,77,255,.35);
}
.today{
  font-size:18px;
  font-weight:900;
  margin:8px 0 6px;
}
.tomorrow{
  color:var(--muted);
  font-weight:800;
  margin-bottom:14px;
}
.smallNote{
  font-size:12px;
  color:var(--muted);
  margin-top:10px;
}

#leaderboard{
  color:var(--muted);
  font-weight:900;
  letter-spacing:.2px;
}
</style>
</head>

<body>

<div id="top">
  <div id="hud">
    <div class="statBox">üí∞ <span id="coins">0</span></div>
    <div class="statBox">üñ± <span id="cpc">0</span>/click</div>
    <div class="statBox">‚ö° Power: <span id="power">0</span></div>
  </div>
  <div class="btnRow">
    <button onclick="openDaily()">üéÅ DAILY</button>
    <button onclick="clickCoins()">CLICK</button>
  </div>
</div>

<div class="section">
  <div class="sectionTitle">
    <h2>üõí Pack Shop</h2>
    <div class="sub">All packs work (fixed)</div>
  </div>
  <div class="shop" id="shop"></div>
</div>

<div class="section">
  <div class="sectionTitle">
    <h2>üìò Your Collection</h2>
    <div class="sub">Duplicates boost coins per click</div>
  </div>
  <div class="inventory" id="inventory"></div>
</div>

<div class="section">
  <div class="sectionTitle">
    <h2>üèÜ Best Card</h2>
    <div class="sub">Highest rarity you own</div>
  </div>
  <div id="leaderboard">Best Card: None</div>
</div>

<!-- PACK OPEN -->
<div id="overlay">
  <h2>YOU GOT</h2>
  <div id="reveal"></div>
  <button onclick="overlay.style.display='none'">DONE</button>
</div>

<!-- CRAZY FLASH -->
<div id="rareFlash"></div>

<!-- DAILY AREA -->
<div id="dailyArea">
  <div class="dailyBox">
    <h2>üéÅ Daily Rewards</h2>
    <div class="timer" id="dailyTimer">00:00:00</div>
    <div class="today" id="todayReward">Today: ‚Ä¶</div>
    <div class="tomorrow" id="tomorrowReward">Tomorrow: ‚Ä¶</div>
    <button id="claimDailyBtn" onclick="claimDaily()">CLAIM</button>
    <button onclick="closeDaily()">CLOSE</button>
    <div class="smallNote">Reward refreshes every 24 hours</div>
  </div>
</div>

<script>
/* =========================
   SAVE (separate keys)
========================= */
const COIN_KEY="V3U_coins";
const INV_KEY="V3U_inv";
const DAILY_TIME="V3U_daily_time";
const DAILY_DAY="V3U_daily_day";

let coins = +localStorage.getItem(COIN_KEY);
if (!Number.isFinite(coins)) coins = 20;

let inv = JSON.parse(localStorage.getItem(INV_KEY) || "{}");

/* =========================
   DATA
========================= */
const rarityPower = { Common:1, Rare:3, Epic:7, Legendary:15, Mythic:30 };
const rarityRank  = { Common:1, Rare:2, Epic:3, Legendary:4, Mythic:5 };

const cards = [
  // COMMON
  {name:"Cat",rarity:"Common",icon:"üê±"},
  {name:"Dog",rarity:"Common",icon:"üê∂"},
  {name:"Fox",rarity:"Common",icon:"ü¶ä"},
  {name:"Panda",rarity:"Common",icon:"üêº"},
  {name:"Koala",rarity:"Common",icon:"üê®"},
  {name:"Monkey",rarity:"Common",icon:"üêµ"},
  {name:"Cow",rarity:"Common",icon:"üêÆ"},
  {name:"Rabbit",rarity:"Common",icon:"üê∞"},
  {name:"Frog",rarity:"Common",icon:"üê∏"},

  // RARE
  {name:"Penguin",rarity:"Rare",icon:"üêß"},
  {name:"Shark",rarity:"Rare",icon:"ü¶à"},
  {name:"Eagle",rarity:"Rare",icon:"ü¶Ö"},
  {name:"Tiger",rarity:"Rare",icon:"üêØ"},
  {name:"Crocodile",rarity:"Rare",icon:"üêä"},

  // EPIC
  {name:"Knight",rarity:"Epic",icon:"üõ°Ô∏è"},
  {name:"Mage",rarity:"Epic",icon:"üßô"},
  {name:"Elf",rarity:"Epic",icon:"üßù"},
  {name:"Orc",rarity:"Epic",icon:"üëπ"},
  {name:"Archer",rarity:"Epic",icon:"üèπ"},

  // LEGENDARY
  {name:"Samurai",rarity:"Legendary",icon:"üó°Ô∏è"},
  {name:"Ninja",rarity:"Legendary",icon:"ü•∑"},
  {name:"Robot",rarity:"Legendary",icon:"ü§ñ"},
  {name:"Dragon",rarity:"Legendary",icon:"üêâ"},
  {name:"Cyborg",rarity:"Legendary",icon:"üî©"},
  {name:"Mech",rarity:"Legendary",icon:"‚öôÔ∏è"},

  // MYTHIC
  {name:"Phoenix",rarity:"Mythic",icon:"üî•"},
  {name:"Void Lord",rarity:"Mythic",icon:"üåë"},
  {name:"Titan",rarity:"Mythic",icon:"üëë"},
  {name:"Leviathan",rarity:"Mythic",icon:"üåä"},
  {name:"Sun God",rarity:"Mythic",icon:"‚òÄÔ∏è"},
  {name:"Black Hole",rarity:"Mythic",icon:"üï≥Ô∏è"},
  {name:"Star Guardian",rarity:"Mythic",icon:"üå†"},
  {name:"Time God",rarity:"Mythic",icon:"‚è≥"}
];

const packs = [
  ["Starter", 250],
  ["Animal", 500],
  ["Forest", 1000],
  ["Ocean", 2000],
  ["Desert", 3000],
  ["Hero", 5000],
  ["Warrior", 7500],
  ["Magic", 12000],
  ["Tech", 16000],
  ["Epic", 20000],
  ["Legend", 50000],
  ["Cosmic", 150000],
  ["Chaos", 300000],
  ["Celestial", 450000],
  ["God Pack", 650000]
];

const dailyRewards = [
  {type:"coins", value:25000,  label:"+25,000 Coins"},
  {type:"pack",  value:20000,  label:"Free Epic Pack"},
  {type:"coins", value:50000,  label:"+50,000 Coins"},
  {type:"pack",  value:50000,  label:"Free Legend Pack"},
  {type:"coins", value:100000, label:"+100,000 Coins"},
  {type:"pack",  value:150000, label:"Free Cosmic Pack"},
  {type:"pack",  value:650000, label:"Free God Pack"}
];

/* =========================
   HELPERS
========================= */
function save(){
  localStorage.setItem(COIN_KEY, String(coins));
  localStorage.setItem(INV_KEY, JSON.stringify(inv));
}

function powerTotal(){
  let p=0;
  for(const k in inv){
    const c=inv[k];
    p += rarityPower[c.rarity] * c.count;
  }
  return p;
}

function coinsPerClick(){
  return 5 + powerTotal();
}

function bestCardName(){
  let best="None", bestR=0;
  for(const k in inv){
    const r = rarityRank[inv[k].rarity] || 0;
    if(r > bestR){ bestR=r; best=k; }
  }
  return best;
}

function pickFrom(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

const byRarity = {
  Common: cards.filter(c=>c.rarity==="Common"),
  Rare: cards.filter(c=>c.rarity==="Rare"),
  Epic: cards.filter(c=>c.rarity==="Epic"),
  Legendary: cards.filter(c=>c.rarity==="Legendary"),
  Mythic: cards.filter(c=>c.rarity==="Mythic")
};

/* Better odds on expensive packs */
function rollCardForPackCost(cost){
  let r = Math.random()*100;

  const mythBonus = cost >= 650000 ? 8 : cost >= 450000 ? 6 : cost >= 300000 ? 5 : cost >= 150000 ? 4 : cost >= 50000 ? 2 : 0;
  const legBonus  = cost >= 650000 ? 18 : cost >= 450000 ? 15 : cost >= 300000 ? 13 : cost >= 150000 ? 10 : cost >= 50000 ? 6 : cost >= 20000 ? 4 : 0;

  let myth = 2 + mythBonus;
  let leg  = 10 + legBonus;
  let epic = 18;
  let rare = 25;
  let common = Math.max(0, 100 - (myth+leg+epic+rare));

  if(r < myth) return pickFrom(byRarity.Mythic);
  r -= myth;
  if(r < leg) return pickFrom(byRarity.Legendary);
  r -= leg;
  if(r < epic) return pickFrom(byRarity.Epic);
  r -= epic;
  if(r < rare) return pickFrom(byRarity.Rare);
  return pickFrom(byRarity.Common.length ? byRarity.Common : cards);
}

/* =========================
   GAME ACTIONS
========================= */
function clickCoins(){
  coins += coinsPerClick();
  render();
}

function buyPack(cost){
  if(coins < cost) return alert("Not enough coins!");
  coins -= cost;
  openPack(cost);
}

/* CRAZY animation for Legendary+ */
function openPack(cost){
  overlay.style.display="flex";
  reveal.innerHTML="";

  const pulled = [];
  for(let i=0;i<4;i++){
    const card = rollCardForPackCost(cost);
    if(!inv[card.name]) inv[card.name] = {...card, count:0};
    inv[card.name].count++;
    pulled.push(card);
  }

  const big = pulled.find(c => c.rarity==="Legendary" || c.rarity==="Mythic");

  if(big){
    rareFlash.style.display="flex";
    rareFlash.textContent = big.rarity.toUpperCase()+"!";
    rareFlash.className = ""; // reset
    rareFlash.classList.add(big.rarity==="Mythic" ? "mythicFlash" : "legendFlash");
    rareFlash.classList.add("flashAnim");

    document.body.classList.add("shake");

    setTimeout(()=>{
      rareFlash.style.display="none";
      rareFlash.className = "";
      document.body.classList.remove("shake");
      showReveal(pulled);
    },700);
  }else{
    showReveal(pulled);
  }

  render();
}

function showReveal(list){
  reveal.innerHTML="";
  for(const card of list){
    const div = document.createElement("div");
    div.className = `reveal-card ${card.rarity}`;
    div.innerHTML = `
      <div class="art">${card.icon}</div>
      <strong>${card.name}</strong>
      <div style="color:var(--muted);font-weight:900;margin-top:2px">${card.rarity}</div>
    `;
    reveal.appendChild(div);
  }
}

/* =========================
   DAILY
========================= */
let dailyInterval;

function openDaily(){
  dailyArea.style.display="flex";
  updateDaily();
  clearInterval(dailyInterval);
  dailyInterval = setInterval(updateDaily, 1000);
}

function closeDaily(){
  dailyArea.style.display="none";
  clearInterval(dailyInterval);
}

function updateDaily(){
  const last = +localStorage.getItem(DAILY_TIME) || 0;
  const now = Date.now();
  const diff = 86400000 - (now - last);

  const day = +localStorage.getItem(DAILY_DAY) || 0;
  const today = dailyRewards[day % dailyRewards.length];
  const tomorrow = dailyRewards[(day+1) % dailyRewards.length];

  todayReward.textContent = "Today: " + today.label;
  tomorrowReward.textContent = "Tomorrow: " + tomorrow.label;

  if(diff <= 0){
    dailyTimer.textContent = "READY!";
    claimDailyBtn.style.display = "inline-block";
  }else{
    const h = Math.floor(diff/3600000);
    const m = Math.floor((diff%3600000)/60000);
    const s = Math.floor((diff%60000)/1000);
    dailyTimer.textContent = `${String(h).padStart(2,"0")}:${String(m).padStart(2,"0")}:${String(s).padStart(2,"0")}`;
    claimDailyBtn.style.display = "none";
  }
}

function claimDaily(){
  const last = +localStorage.getItem(DAILY_TIME) || 0;
  const now = Date.now();
  if(now - last < 86400000) return;

  let day = +localStorage.getItem(DAILY_DAY) || 0;
  const reward = dailyRewards[day % dailyRewards.length];

  if(reward.type === "coins") coins += reward.value;
  else openPack(reward.value);

  localStorage.setItem(DAILY_TIME, String(Date.now()));
  localStorage.setItem(DAILY_DAY, String(day+1));

  closeDaily();
  render();
}

/* =========================
   RENDER / BUILD SHOP
========================= */
function buildShop(){
  shop.innerHTML="";
  for(const [name,cost] of packs){
    const div = document.createElement("div");
    div.className="pack";
    div.innerHTML = `
      <h3>${name}</h3>
      <div class="meta"><span>Price</span><span>${cost.toLocaleString()}</span></div>
      <button onclick="buyPack(${cost})">Open</button>
    `;
    shop.appendChild(div);
  }
}

function render(){
  coinsEl.textContent = coins.toLocaleString();
  const p = powerTotal();
  powerEl.textContent = p.toLocaleString();
  cpcEl.textContent = coinsPerClick().toLocaleString();

  const list = Object.values(inv).sort((a,b)=>{
    const ra = rarityRank[a.rarity]||0;
    const rb = rarityRank[b.rarity]||0;
    if(rb!==ra) return rb-ra;
    return a.name.localeCompare(b.name);
  });

  inventory.innerHTML="";
  for(const c of list){
    const d = document.createElement("div");
    d.className = `card ${c.rarity}`;
    d.innerHTML = `
      <div class="badge">${c.rarity}</div>
      <div class="art">${c.icon}</div>
      <strong>${c.name}</strong>
      <div class="count">x${c.count} ‚Ä¢ +${(rarityPower[c.rarity]*c.count).toLocaleString()} power</div>
    `;
    inventory.appendChild(d);
  }

  leaderboard.textContent = `Best Card: ${bestCardName()}`;
  save();
}

/* =========================
   INIT
========================= */
const coinsEl=document.getElementById("coins");
const cpcEl=document.getElementById("cpc");
const powerEl=document.getElementById("power");

const inventory=document.getElementById("inventory");
const leaderboard=document.getElementById("leaderboard");

const overlay=document.getElementById("overlay");
const reveal=document.getElementById("reveal");
const rareFlash=document.getElementById("rareFlash");

const shop=document.getElementById("shop");

const dailyArea=document.getElementById("dailyArea");
const dailyTimer=document.getElementById("dailyTimer");
const todayReward=document.getElementById("todayReward");
const tomorrowReward=document.getElementById("tomorrowReward");
const claimDailyBtn=document.getElementById("claimDailyBtn");

buildShop();
render();
</script>

</body>
</html>
